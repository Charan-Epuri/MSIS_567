{"ast":null,"code":"import _slicedToArray from\"E:/feedback-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Card from\"./shared/Card.jsx\";import RatingSelect from\"./RatingSelect.jsx\";import Button from\"./shared/Button.jsx\";import{useContext,useState,useEffect}from\"react\";import FeedbackContext from\"../context/FeedbackContext.jsx\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function FeedbackForm(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(10),_useState4=_slicedToArray(_useState3,2),rating=_useState4[0],setRating=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),btnDisabled=_useState6[0],setBtnDisabled=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var _useContext=useContext(FeedbackContext),addFeedback=_useContext.addFeedback,feedbackEdit=_useContext.feedbackEdit,updateFeedback=_useContext.updateFeedback;useEffect(function(){if(feedbackEdit.edit===true){setBtnDisabled(false);setText(feedbackEdit.item.text);setRating(feedbackEdit.item.rating);}},[feedbackEdit]);var handleTextChange=function handleTextChange(e){if(text===\"\"){setBtnDisabled(true);setMessage(null);}else if(text.trim().length<10){setMessage(\"Text must be atleast 10 characters\");setBtnDisabled(true);}else{setMessage(null);setBtnDisabled(false);}setText(e.target.value);};var handleSubmit=function handleSubmit(e){e.preventDefault();if(text.trim().length>10){var newFeedback={text:text,rating:rating};if(feedbackEdit.edit===true){updateFeedback(feedbackEdit.item.id,newFeedback);}else{addFeedback(newFeedback);}setText(\"\");}};return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"How would you rate your service with us?\"}),/*#__PURE__*/_jsx(RatingSelect,{select:function select(rating){return setRating(rating);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:handleTextChange,type:\"text\",placeholder:\"Write a review\",value:text}),/*#__PURE__*/_jsx(Button,{type:\"submit\",isDisabled:btnDisabled,children:\"Send\"})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:message})]})});}export default FeedbackForm;","map":{"version":3,"sources":["E:/feedback-app/src/components/FeedbackForm.jsx"],"names":["Card","RatingSelect","Button","useContext","useState","useEffect","FeedbackContext","FeedbackForm","text","setText","rating","setRating","btnDisabled","setBtnDisabled","message","setMessage","addFeedback","feedbackEdit","updateFeedback","edit","item","handleTextChange","e","trim","length","target","value","handleSubmit","preventDefault","newFeedback","id"],"mappings":"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","sourcesContent":["import Card from \"./shared/Card.jsx\";\r\nimport RatingSelect from \"./RatingSelect.jsx\";\r\nimport Button from \"./shared/Button.jsx\";\r\nimport { useContext, useState, useEffect } from \"react\";\r\nimport FeedbackContext from \"../context/FeedbackContext.jsx\";\r\n\r\nfunction FeedbackForm() {\r\n  const [text, setText] = useState(\"\");\r\n  const [rating, setRating] = useState(10);\r\n  const [btnDisabled, setBtnDisabled] = useState(true);\r\n  const [message, setMessage] = useState(null);\r\n\r\n  const { addFeedback, feedbackEdit, updateFeedback } =\r\n    useContext(FeedbackContext);\r\n\r\n  useEffect(() => {\r\n    if (feedbackEdit.edit === true) {\r\n      setBtnDisabled(false);\r\n      setText(feedbackEdit.item.text);\r\n      setRating(feedbackEdit.item.rating);\r\n    }\r\n  }, [feedbackEdit]);\r\n\r\n  let handleTextChange = (e) => {\r\n    if (text === \"\") {\r\n      setBtnDisabled(true);\r\n      setMessage(null);\r\n    } else if (text.trim().length < 10) {\r\n      setMessage(\"Text must be atleast 10 characters\");\r\n      setBtnDisabled(true);\r\n    } else {\r\n      setMessage(null);\r\n      setBtnDisabled(false);\r\n    }\r\n    setText(e.target.value);\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (text.trim().length > 10) {\r\n      const newFeedback = {\r\n        text,\r\n        rating,\r\n      };\r\n      if (feedbackEdit.edit === true) {\r\n        updateFeedback(feedbackEdit.item.id, newFeedback);\r\n      } else {\r\n        addFeedback(newFeedback);\r\n      }\r\n      setText(\"\");\r\n    }\r\n  };\r\n  return (\r\n    <Card>\r\n      <form onSubmit={handleSubmit}>\r\n        <h2>How would you rate your service with us?</h2>\r\n        <RatingSelect select={(rating) => setRating(rating)} />\r\n        <div className=\"input-group\">\r\n          <input\r\n            onChange={handleTextChange}\r\n            type=\"text\"\r\n            placeholder=\"Write a review\"\r\n            value={text}\r\n          />\r\n          <Button type=\"submit\" isDisabled={btnDisabled}>\r\n            Send\r\n          </Button>\r\n        </div>\r\n        {message && <div className=\"message\">{message}</div>}\r\n      </form>\r\n    </Card>\r\n  );\r\n}\r\n\r\nexport default FeedbackForm;\r\n"]},"metadata":{},"sourceType":"module"}